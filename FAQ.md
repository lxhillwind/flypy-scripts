关于输入方案的一些问答.

## 简介

- 最初目的: 不使用翻页, 减少候选 (而不是盲打).

- 根据官方数据 (./搜狗拼音win版自定义短语.ini)
- 去掉其中的词组 (和 of / ov 等等非常用汉字输入)

- 将一简码的首选字合并到二简码, 并将对应的原始的二简码向后挪

- 为只有二简码的字补充对应的四键全码

<del>
- 调整全码优先级, 确保为词组预留出了首选位置.
</del>

- 根据如上数据和 ./flypy_plus.txt, 依照字频 (./单字字频统计.txt 和 ./多音字.txt)
  将四键全码补充到三简码 (修改了官方数据中的三简码顺序).
  (将有二简码的字尽量从第3个候选字开始排)

- 将拆字输入的编码 (./split-char.py) 以 o 开头作为生僻字输入方案.

- 为了便于区分一 / 二简码和输入法提供的建议, 电脑端可导入 ./gen-delimiter.py 的结果
  (./macos-special-delimiter.ini).
  手机上反正要选字, 就不用了.

## 注意事项

在重新生成 macos-base.ini 之后, 需要执行 ./check-duplicate.py 来检查是否有错误编码.

## 输入法设置注意事项

- 尽量关闭联网 / 上下文 / 云相关的功能.
- 打开动态组词功能
    - 这样可以让全码次位单字保证候选字位置; 另外, 自造词需要这个才能生效.
- 常见的输入法中, 可以通过自定义短语功能来导入 ./macos-base.ini 实现音形码.
- 部分输入法中 (目前只有手心输入法?), 可以通过 ./鹤形辅助码.txt 来进行词组快速筛选.

## 为什么将一简码如此处理?

- 匹配纯双拼的输入节奏, 确保即使输入了2个字母, 也能空格输入最常用的字.

## 为什么将四键全码合并到三简码?

- 还是输入节奏的问题: 输入2个字母后,
  最好第3个字母就能让想输入的字出现在候选框.

## 为什么拆字输入的编码要以 o 开头, 而不是增加到四键全码里?

- 避免污染4个字母输入词组.

### 考虑分配2或者3以上的优先级?

- 部分输入法 (例如 fcitx5) 不遵守这个: 当同样的编码没有更靠前的候选字时,
  这些编码对应关系就直接顶到前面去了, 导致词组输入很困难.

## 应该使用哪个文件来导入?

./macos-base.ini

然后, 如果是电脑的话, 可以再导入 ./macos-special-split-char.ini (拆字输入) 和
./macos-special-delimiter.ini (一 / 二简码分隔符).

## 为什么手机上不导入 ./macos-special-split-char.ini?

Android 手机上, 目前使用 (禁止联网的) 手心输入法, 因为常见的输入法中,
只有它支持导入自定义短语. (百度输入法手机版也可以? 不过短语格式可能不一样)

不过, 它不支持键入编码长度超过4的短语.

## 为什么不做三简码补齐到二简码, 以让二简码的次选字有更多确定性?

- 需要考虑多音字, 仅依靠 ./单字字频统计.txt 是无法完成的; 例如: "解" 的 "xie"
  读音比 "写" 更罕见, 但是 "解" (jie) 的字频更靠前, 所以 "xp"
的次选字不好通过程序分配: 除非我们有包含读音的字频统计数据.

EDIT: 2024-01-17 生成了三简码的多音字数据 (./多音字.txt),
因此三简码的数据比较符合我的预期了; 但是工作量太大了, 不想搞二简字的了.

<del>
## 为什么全码为词组保留首选位 (即使这样可能有些字需要3才能选中)?

- 这是为了输入的节奏 (类似一简码补充到二简码且顶替首位);
  输入全码后通常需要停顿确认候选字位置, 因此单字排在词组的后面是可以接受的; 倒过来则不行 (考虑 鸡蛋 和 汲)
  而且目前经过统计, 只有 fuff (福分 / 拂 / 麸) 有第三候选字 (仅考虑官方数据: 即没有生僻字), 还是非常少的 (还有其他不到6个类似的, 其词组不常见, 就直接去掉了).

最好的方案是支持直接辅助码, 便于筛词: 不过目前主流输入法中, 只有手心输入法是支持的.

(短暂尝试过为词组保留次选位而不是首位; 但感觉这样会破坏词组的输入节奏, 所以还是换回次选位了;
毕竟打单字全码的话, 基本上还是会看着候选框打的; 词组则不太会, 即使词组重码率很高.)

## 接上条: 全码首位可能不是单字的话, 是否会造成输入确定性的问题?

*搜狗输入法 Mac 版上, 需要打开 "动态组词" 功能 (不过没必要开启云计算候选);*
这样才能让全码次选单字生效, 和加入生词.

不过考虑到我们最初的目标 (减少翻页), 这个不是什么大问题.

(单字确定性, 尤其是全码单字, 不在我们的目标里; 不需要不看候选框的盲打.)

## 为什么全码单字优先?

因为词组基本上都要看着候选框打, 所以全码单字就尽量靠前, 最好能练出盲打 (不看屏幕).

**部分非常不常用的字, 还是为部分非常常用的词组让出首位;**

例如: 𬬸 -> 数据, 𬳽 -> 什么. 这部分则来自平时打词的积累; 添加到 ./fixed-encoding.txt 的末尾.

</del>

## 全码词组优先?

因为我们打4个字母时, 通常都是为了打词组;

如果真的需要盲打单字, 还是让输入法来支持特殊设置吧 (比如, 只在 vim 中使用特殊设置的输入法来打单字).

(目前, 这个场景还是不需要的.)

## 部分字只有三简码没有全码, 怎么办?

例如 "纸" (vis), 没有全码, 而且按照我们的处理方式, 其三简码是排在第3位的.

暂时没有好的解决方法; 只能尽量打其三简码然后选字了: 反正是在首页的.

如果这种情况很多的话, 考虑写程序额外导入其全码.

(考虑过使用 <https://github.com/zerovip/flypy_things/>,
但是这会重新生成全码数据, 需要再写一个程序; 写了一部分之后, 还是放弃了)
